(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4653],{35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},60379:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var s=a(95155),l=a(12115),r=a(35695),i=a(78126),o=a.n(i),c=a(66766),n=a(6874),d=a.n(n),u=a(62731);let h=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();function m(){var e,t,a;let i=(0,r.useRouter)(),{id:n,slug:m}=(0,r.useParams)(),[x,g]=(0,l.useState)(null),[f,b]=(0,l.useState)(""),[p,v]=(0,l.useState)({reviews:[],totalPages:0,currentPage:1}),[j,y]=(0,l.useState)([]),[N,w]=(0,l.useState)(1),[k,_]=(0,l.useState)(!0),[z,P]=(0,l.useState)(null),S="https://yeefmpremiumcontentfrontdoor-cyfpezerhzbmhzbr.z02.azurefd.net/assets/images/yeeplatform_book_cover.png",A=e=>e?e.replace("yeeplatformstorage.blob.core.windows.net","yeefmpremiumcontentfrontdoor-cyfpezerhzbmhzbr.z02.azurefd.net"):S;(0,l.useEffect)(()=>{(async()=>{try{if(_(!0),!u.Vr.isValid(n))throw Error("Invalid audiobook ID");let e=await fetch("https://yeeplatformbackend.azurewebsites.net/getAudiobook/".concat(n));if(!e.ok)throw Error("Failed to fetch audiobook");let t=await e.json();g(t);let a=new u.Vr(t._id);b(a.getTimestamp().toISOString());let s=h(t.title);if(m!==s)return void i.replace("/audiobooks/".concat(n,"/").concat(s))}catch(e){P(e instanceof Error?e.message:"Failed to load audiobook"),i.push("/audiobooks")}finally{_(!1)}})()},[n,m,i]),(0,l.useEffect)(()=>{x&&(async()=>{try{_(!0);let e=await fetch("https://yeeplatformbackend.azurewebsites.net/reviews/audiobook/".concat(n,"/reviews?page=").concat(N,"&limit=2")),t=await e.json();v(t)}catch(e){P(e instanceof Error?e.message:"Failed to fetch reviews")}finally{_(!1)}})()},[x,n,N]),(0,l.useEffect)(()=>{x&&(async()=>{try{var e;_(!0);let t=[];if((null==(e=x.categories)?void 0:e.length)>0){let e=x.categories.join(","),a=await fetch("https://yeeplatformbackend.azurewebsites.net/categoryindex/audiobook/".concat(e,"?page=1&limit=10")),s=await a.json();t=Array.isArray(s)?s:s.data||[]}if(t.length<5&&x.title){let e=await fetch("https://yeeplatformbackend.azurewebsites.net/getallaudiobooks?search=".concat(h(x.title),"&page=1&limit=10")),a=await e.json(),s=Array.isArray(a)?a:a.data||[];t=[...new Set([...t,...s])]}y(t.filter(e=>e._id!==n).slice(0,10))}catch(e){P(e instanceof Error?e.message:"Failed to fetch related content")}finally{_(!1)}})()},[x,n]);let M=()=>{x&&i.push("/audiobooks/".concat(n,"/").concat(h(x.title),"/listen"))};if(k&&!x)return(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(z)return(0,s.jsx)("div",{className:"container mx-auto p-4 max-w-7xl",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-red-800",children:z}),(0,s.jsx)("button",{onClick:()=>i.push("/audiobooks"),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Audiobooks"})]})});if(!x)return null;let R=A(x.coverImage_optimized_url||x.coverImage||x.cover_url||x.coverimage||S),C={"@context":"https://schema.org","@type":"Audiobook",name:x.title,description:x.description,image:R,author:{"@type":"Person",name:x.author},publisher:{"@type":"Organization",name:"Yee FM"},datePublished:f,aggregateRating:{"@type":"AggregateRating",ratingValue:x.ratings,bestRating:5,worstRating:1,ratingCount:(null==(e=p.reviews)?void 0:e.length)||0},offers:{"@type":"Offer",availability:"https://schema.org/InStock",price:"0",priceCurrency:"USD"}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o(),{children:[(0,s.jsxs)("title",{children:["Listen to ",x.title," - Free Audiobook | Yee FM"]}),(0,s.jsx)("meta",{name:"description",content:"Listen to ".concat(x.title," by ").concat(x.author," for free on Yee FM. ").concat(null==(t=x.description)?void 0:t.substring(0,120),"...")}),(0,s.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(C)}})]}),(0,s.jsxs)("div",{className:"container mx-auto p-4 max-w-7xl",children:[(0,s.jsx)("nav",{className:"mb-6",children:(0,s.jsx)(d(),{href:"/audiobooks",className:"inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:"â† Back to Audiobooks"})}),(0,s.jsx)("article",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,s.jsx)("div",{className:"lg:w-1/3 p-6",children:(0,s.jsx)("div",{className:"relative aspect-[3/4] w-full max-w-sm mx-auto",children:(0,s.jsx)(c.default,{src:R,alt:"".concat(x.title," cover"),fill:!0,className:"object-cover rounded-lg shadow-xl cursor-pointer transition-transform hover:scale-105",onClick:M,priority:!0})})}),(0,s.jsxs)("div",{className:"lg:w-2/3 p-6",children:[(0,s.jsxs)("header",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:x.title}),(0,s.jsxs)("p",{className:"text-lg text-gray-600 mb-2",children:["by ",x.author]}),(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(t<Math.floor(x.ratings)?"fill-current":"fill-gray-300"),viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,s.jsxs)("span",{className:"ml-2 text-gray-600",children:["(",x.ratings,"/5)"]})]}),(0,s.jsxs)("button",{onClick:M,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200 flex items-center space-x-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),(0,s.jsx)("span",{children:"Listen Now"})]})]}),(0,s.jsxs)("section",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-700 leading-relaxed",children:x.description||"No description available."})]}),(0,s.jsxs)("section",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Details"}),(0,s.jsxs)("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"font-semibold text-gray-900",children:"Author:"}),(0,s.jsx)("dd",{className:"text-gray-700",children:x.author||"N/A"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("dt",{className:"font-semibold text-gray-900",children:"ISBN:"}),(0,s.jsx)("dd",{className:"text-gray-700",children:x.ISBN||"N/A"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("dt",{className:"font-semibold text-gray-900",children:"Categories:"}),(0,s.jsx)("dd",{className:"text-gray-700",children:(null==(a=x.categories)?void 0:a.join(", "))||"N/A"})]})]})]})]})]})}),(0,s.jsxs)("section",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Reviews"}),(0,s.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Add Review"})]}),p.reviews.length>0?(0,s.jsxs)("div",{className:"space-y-6",children:[p.reviews.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((t,a)=>(0,s.jsx)("svg",{className:"w-4 h-4 ".concat(a<e.rating?"fill-current":"fill-gray-300"),viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},a))}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,s.jsx)("p",{className:"text-gray-800",children:e.comment})]},e._id)),p.totalPages>1&&(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsx)("nav",{className:"flex space-x-2",children:[...Array(p.totalPages)].map((e,t)=>{let a=t+1;return(0,s.jsx)("button",{onClick:()=>{w(a)},className:"px-3 py-2 rounded ".concat(N===a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:a},a)})})})]}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No reviews yet. Be the first to review this audiobook!"})]}),(0,s.jsxs)("section",{className:"mt-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Related Audiobooks"}),j.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:j.map(e=>(0,s.jsxs)(d(),{href:"/audiobooks/".concat(e._id,"/").concat(h(e.title)),className:"group block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200",children:[(0,s.jsx)("div",{className:"aspect-[3/4] relative overflow-hidden rounded-t-lg",children:(0,s.jsx)(c.default,{src:A(e.coverImage||S),alt:"".concat(e.title," cover"),fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-200"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),(0,s.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((t,a)=>(0,s.jsx)("svg",{className:"w-4 h-4 ".concat(a<Math.floor(e.rating)?"fill-current":"fill-gray-300"),viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},a))})]})]},e._id))}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No related audiobooks found."})]})]})]})}},77500:(e,t,a)=>{Promise.resolve().then(a.bind(a,60379))},78126:(e,t)=>{"use strict";function a(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[7555,6874,9641,6766,8441,5964,7358],()=>e(e.s=77500)),_N_E=e.O()}]);