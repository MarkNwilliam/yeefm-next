(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8841],{5040:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},18271:(e,t,s)=>{Promise.resolve().then(s.bind(s,40350))},19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:n?24*Number(i)/Number(r):i,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let s=(0,a.forwardRef)((s,o)=>{let{className:n,...c}=s;return(0,a.createElement)(i,{ref:o,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...c})});return s.displayName=r(e),s}},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},38564:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},40350:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var a=s(95155),r=s(12115),l=s(35695),o=s(38564),i=s(5040),n=s(35169),c=s(14186),d=s(19946);let m=(0,d.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),h=(0,d.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var x=s(71007),u=s(43332);let g=(0,d.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var p=s(90925),b=s(77237);function f(e){let{className:t,...s}=e;return(0,a.jsx)("div",{className:"animate-pulse bg-gray-200 rounded-md ".concat(t),...s})}var v=s(62731);let w="https://yeeplatformstorage.blob.core.windows.net/assets/images/yeeplatform_book_cover.png",j=e=>e?e.replace("https://yeeplatformstorage.blob.core.windows.net","https://yeeplatform.azureedge.net"):w,y=e=>e.toLowerCase().replace(/ /g,"-").replace(/[^a-z0-9-]/g,""),N=()=>(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"w-full lg:w-1/4 mb-6 lg:mb-0",children:(0,a.jsx)(f,{className:"aspect-[2/3] w-full max-h-[50vh] rounded-lg"})}),(0,a.jsxs)("div",{className:"w-full lg:w-3/4 lg:ml-6",children:[(0,a.jsx)(f,{className:"h-8 w-3/4 mb-4"}),(0,a.jsx)(f,{className:"h-4 w-1/2 mb-4"}),(0,a.jsx)("div",{className:"flex mb-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(f,{className:"h-6 w-6 mr-1"},t))}),(0,a.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,a.jsx)(f,{className:"h-4 w-full"}),(0,a.jsx)(f,{className:"h-4 w-full"}),(0,a.jsx)(f,{className:"h-4 w-3/4"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(f,{className:"h-6 w-1/3"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f,{className:"h-4 w-full"}),(0,a.jsx)(f,{className:"h-4 w-full"})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,a.jsx)(f,{className:"h-12 w-32"}),(0,a.jsx)(f,{className:"h-12 w-24"})]})]})]}),k=()=>(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,a.jsx)(f,{className:"aspect-[2/3] w-full rounded-lg mb-4"}),(0,a.jsx)(f,{className:"h-4 w-3/4 mb-2"}),(0,a.jsx)(f,{className:"h-4 w-1/2 mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f,{className:"h-3 w-full"}),(0,a.jsx)(f,{className:"h-3 w-5/6"}),(0,a.jsx)(f,{className:"h-3 w-4/6"})]})]},t))}),A=e=>{let{src:t,alt:s,onClick:r}=e;return(0,a.jsx)("div",{className:"aspect-[2/3] max-h-[50vh] w-full relative mx-auto",children:t?(0,a.jsx)("img",{src:t,alt:s,onClick:r,className:"absolute inset-0 w-full h-full object-cover rounded-lg shadow-xl cursor-pointer hover:shadow-2xl transition-shadow duration-300",loading:"lazy"}):(0,a.jsx)(f,{className:"absolute inset-0 w-full h-full rounded-lg"})})},C=e=>{let{rating:t,showValue:s=!0}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(o.A,{className:"h-5 w-5 ".concat(s<Math.floor(t)?"fill-yellow-400 text-yellow-400":"text-gray-300")},s))}),s&&(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",t.toFixed(1),")"]})]})},P=e=>{var t,s;let{id:d,slug:P}=e,S=(0,l.useRouter)(),{user:z}=(0,p.A)(),E=(0,r.useRef)(null),[L,_]=(0,r.useState)(""),[I,B]=(0,r.useState)(!1),[M,R]=(0,r.useState)(!1),[U,D]=(0,r.useState)({ebook:null,loading:!0,error:null,reviews:{reviews:[],totalPages:0},relatedContent:[],reviewsPage:1,relatedContentPage:1,relatedContentLoading:!1}),F=(0,r.useMemo)(()=>{if(!U.ebook)return w;let e=U.ebook.coverImage_optimized_url||U.ebook.coverImage||U.ebook.coverimage||U.ebook.cover_url||w;return(e=>e&&e.toLowerCase().endsWith(".pdf"))(e)?w:j(e)},[U.ebook]),H=(0,r.useCallback)(async()=>{if((null==z?void 0:z.uid)&&d)try{let e=await fetch("https://yeeplatformbackend.azurewebsites.net/getrentalstatus/".concat(z.uid,"/").concat(d));if(e.ok){let t=await e.json();B(t.paid)}}catch(e){console.error("Error checking rental status:",e),B(!1)}},[null==z?void 0:z.uid,d]),O=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";D(e=>({...e,relatedContentLoading:!0}));let s=[];for(let t of e)if(t)try{let e=await fetch("https://yeeplatformbackend.azurewebsites.net/categoryindex/ebook/".concat(y(t),"?page=").concat(U.relatedContentPage,"&limit=").concat(10));if(e.ok){let t=await e.json();if((s=Array.isArray(t)?t:[]).length>0)break}}catch(e){console.error("Error fetching category data:",e)}if(0===s.length&&t)try{let e=await fetch("https://yeeplatformbackend.azurewebsites.net/searchIndexedbooks?query=".concat(y(t),"&page=").concat(U.relatedContentPage,"&limit=").concat(10));if(e.ok){let t=await e.json();s=(s=Array.isArray(t.data)?t.data:[]).filter(e=>e._id!==d)}}catch(e){console.error("Error fetching by title:",e)}if(0===s.length)try{let e=await fetch("https://yeeplatformbackend.azurewebsites.net/getallebooks?page=".concat(U.relatedContentPage,"&limit=").concat(10));if(e.ok){let t=await e.json();s=(s=Array.isArray(t.data)?t.data:[]).filter(e=>e._id!==d)}}catch(e){console.error("Error fetching all ebooks:",e)}D(e=>({...e,relatedContent:s,relatedContentLoading:!1}))},[d,U.relatedContentPage]),T=(0,r.useCallback)(async()=>{try{let[e,t]=await Promise.all([fetch("https://yeeplatformbackend.azurewebsites.net/getEbook/".concat(d)),fetch("https://yeeplatformbackend.azurewebsites.net/reviews/ebook/".concat(d,"/reviews?page=").concat(U.reviewsPage,"&limit=").concat(2))]);if(!e.ok)throw Error(404===e.status?"Ebook not found":"Failed to fetch ebook");let[s,a]=await Promise.all([e.json(),t.json()]);try{let e=new v.Vr(s._id).getTimestamp();_(e.toISOString())}catch(e){console.error("Error parsing ObjectId:",e),_(new Date().toISOString())}D(e=>({...e,ebook:s,reviews:a,loading:!1,error:null}));let r=y(s.title);P!==r&&S.replace("/books/".concat(d,"/").concat(r))}catch(e){console.error("Error fetching ebook data:",e),D(t=>({...t,error:e instanceof Error?e.message:"Failed to fetch ebook",loading:!1}))}},[d,P,S,U.reviewsPage]),W=(0,r.useCallback)(()=>{if(!U.ebook)return;let e=(e=>{try{var t;return(null==(t=new URL(e).pathname.split(".").pop())?void 0:t.toLowerCase())||null}catch(e){return console.error("Error parsing URL:",e),null}})(U.ebook.ebookUrl||U.ebook.ebookurl||U.ebook.ebook_url||"");if(U.ebook.monetization){if("pdf"===e)return void S.push("/premium-books/".concat(d,"/read/").concat(y(P)));if("epub"===e)return void S.push("/premium-books/read-epub/".concat(d,"/").concat(y(P)))}"pdf"!==e&&e?"epub"===e&&S.push("/books/".concat(d,"/read-epub/").concat(y(P))):S.push("/books/".concat(d,"/read/").concat(y(P)))},[U.ebook,d,P,S]);(0,r.useEffect)(()=>{T()},[T]),(0,r.useEffect)(()=>{H()},[H]),(0,r.useEffect)(()=>{U.ebook&&O(U.ebook.categories,U.ebook.title)},[U.ebook,O]);let q=()=>{S.back()};if(U.error)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-md overflow-hidden",children:(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"bg-red-100 p-4 rounded-full",children:(0,a.jsx)(i.A,{className:"h-12 w-12 text-red-500"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-3",children:"Book Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"We couldn't find the book you're looking for. It may have been removed or the URL might be incorrect."}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:space-x-4 justify-center",children:[(0,a.jsx)("button",{onClick:q,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-105",children:"Back to Books"}),(0,a.jsx)("button",{onClick:()=>S.push("/"),className:"px-6 py-3 border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium rounded-lg transition-all duration-200",children:"Go to Homepage"})]})]})})});if(U.loading)return(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(f,{className:"h-4 w-4"}),(0,a.jsx)(f,{className:"h-4 w-16"})]}),(0,a.jsx)(N,{})]});if(!U.ebook)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-white rounded-xl shadow-md p-8 text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)("div",{className:"bg-blue-100 p-4 rounded-full",children:(0,a.jsx)(i.A,{className:"h-12 w-12 text-blue-500"})})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Book Not Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This book is currently not available in our library."}),(0,a.jsx)("button",{onClick:q,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Browse Other Books"})]})});let{ebook:V,reviews:Z,relatedContent:$}=U,G=+(V.price||0);return(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,a.jsxs)("button",{onClick:q,className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 transition-colors",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Back"]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"w-full lg:w-1/4 p-6",children:(0,a.jsx)(A,{src:F,alt:V.title,onClick:W})}),(0,a.jsx)("div",{className:"w-full lg:w-3/4 p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:V.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:V.publishedDate?"Published: ".concat(new Date(L).toLocaleDateString()):"Added: ".concat(new Date(L).toLocaleDateString())})]}),(0,a.jsx)(C,{rating:parseFloat((null==(t=V.ratings)?void 0:t.toString())||"0")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),"Description"]}),(0,a.jsxs)("div",{className:"text-gray-700 leading-relaxed",children:[(0,a.jsx)("p",{children:M||!V.description||V.description.length<=800?V.description||"No description available":"".concat(V.description.substring(0,800),"...")}),V.description&&V.description.length>800&&(0,a.jsx)("button",{onClick:()=>{R(!M)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-800 mt-2 transition-colors",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{className:"h-4 w-4"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{className:"h-4 w-4"}),"Show More"]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Author"]}),(0,a.jsx)("p",{className:"text-gray-700",children:(e=>{if(!e)return"Unknown";if(Array.isArray(e))return e.length>0?e.join(", "):"Unknown";if("string"==typeof e){let t=e.split(",").map(e=>e.trim()).filter(Boolean);return t.length>0?t.join(", "):"Unknown"}return"Unknown"})(V.authors||V.author)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"Categories"]}),(0,a.jsx)("p",{className:"text-gray-700",children:(e=>{if(!e)return"Uncategorized";if(Array.isArray(e)){let t=e.map(e=>{if(!e)return"";let t=e.split(",");return t[t.length-1].trim().replace(/^bic Book Industry Communication,?\s*/,"").trim()}).filter(e=>e&&e.trim());return t.length>0?[...new Set(t)].join(", "):"Uncategorized"}return"string"==typeof e&&e.trim()||"Uncategorized"})(V.categories)})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 pt-6 border-t",children:[V.monetization&&!I&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-blue-100 px-4 py-2 rounded-lg",children:[(0,a.jsx)(g,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("span",{className:"font-semibold text-blue-800",children:["Price: $",G.toFixed(2)]})]}),(0,a.jsxs)("button",{onClick:W,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),I?"Read Book":V.monetization?"Read Preview":"Read Book"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5"}),"Reviews (",(null==(s=Z.reviews)?void 0:s.length)||0,")"]}),(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-800 px-4 py-2 rounded-lg border border-blue-200 hover:border-blue-300 transition-colors",onClick:()=>{z?console.log("Add review clicked"):console.log("Please log in to add review")},children:"Add Review"})]}),(0,a.jsx)("div",{className:"space-y-4",children:Z.reviews&&Z.reviews.length>0?Z.reviews.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(C,{rating:e.rating||0,showValue:!1}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsx)("p",{className:"text-gray-700",children:e.comment}),e.userEmail&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["By: ",e.userEmail]})]},t)):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No reviews yet"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Be the first to review this book!"})]})}),Z.reviews&&Z.reviews.length>0&&Z.totalPages>1&&(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>D(e=>({...e,reviewsPage:Math.max(1,e.reviewsPage-1)})),disabled:1===U.reviewsPage,className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-1",children:[U.reviewsPage," of ",Z.totalPages]}),(0,a.jsx)("button",{onClick:()=>D(e=>({...e,reviewsPage:Math.min(Z.totalPages,e.reviewsPage+1)})),disabled:U.reviewsPage===Z.totalPages,className:"px-3 py-1 rounded border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",ref:E,children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),"Related Books"]}),U.relatedContentLoading?(0,a.jsx)(k,{}):$.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:$.map((e,t)=>(0,a.jsx)("div",{className:"transform hover:scale-105 transition-transform duration-200",children:(0,a.jsx)(b.A,{title:e.title,coverImage:j(e.coverImage_optimized_url||e.coverImage||e.coverimage||e.cover_url||w),author:Array.isArray(e.authors)?e.authors.join(", "):e.authors,publishedDate:e.publishedDate,description:e.description,itemType:"ebook",itemId:e._id,onClick:()=>{S.push("/books/".concat(e._id,"/").concat(y(e.title)))}})},t))}),(0,a.jsx)("div",{className:"flex justify-center mt-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{D(e=>({...e,relatedContentPage:Math.max(1,e.relatedContentPage-1)}))},disabled:1===U.relatedContentPage,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2 text-gray-600",children:["Page ",U.relatedContentPage]}),(0,a.jsx)("button",{onClick:()=>{D(e=>({...e,relatedContentPage:e.relatedContentPage+1}))},disabled:$.length<10,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"Next"})]})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No related books found"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Check back later for more recommendations"})]})]})]})}},43332:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},71007:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},77237:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),r=s(12115),l=s(6874),o=s.n(l);let i="https://yeeplatformstorage.blob.core.windows.net/assets/images/yeeplatform_book_cover.png",n={audiobook:{link:"/audiobooks/",text:"Listen"},audiochapter:{link:"/audiochapters/",text:"Listen"},chapter:{link:"/chapters/",text:"Chapter"},notes:{link:"/notes/",text:"Read"},ebook:{link:"/books/",text:"Book"}};function c(e){let{title:t,coverImage:s,itemType:l,itemId:c,rating:d=0,slug:m,price:h,currency:x,authors:u}=e,[g,p]=(0,r.useState)(i),[b,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(s){let e=new Image;e.src=s,e.onload=()=>{p(s),f(!1)},e.onerror=()=>{p(i),f(!1)}}else f(!1)},[s]);let v=n[l],w="".concat(v.link).concat(c,"/").concat((m||t).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim());return(0,a.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-md bg-white w-full flex flex-col min-h-[300px] hover:shadow-lg transition-shadow",children:[(0,a.jsx)(o(),{href:w,className:"block w-full",children:(0,a.jsxs)("div",{className:"relative w-full h-48",children:[b&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),(0,a.jsx)("img",{className:"w-full h-full object-cover",src:g,alt:"Cover of ".concat(t),onError:e=>{e.currentTarget.src=i}}),h&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-sm font-bold px-2 py-1 rounded-full",children:[x," ",h]})]})}),(0,a.jsxs)("div",{className:"p-4 flex-grow flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm mb-2 line-clamp-2",children:t}),u&&(0,a.jsx)("p",{className:"text-gray-600 text-xs mb-2",children:u.join(", ")}),d>0&&(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("div",{className:"flex text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("svg",{className:"w-4 h-4 ".concat(t<d?"fill-current":"text-gray-300"),viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,a.jsxs)("span",{className:"text-gray-600 text-xs ml-1",children:["(",d,")"]})]})]}),(0,a.jsx)("div",{className:"mt-4 flex justify-center",children:(0,a.jsx)(o(),{href:w,className:"bg-transparent text-blue-600 font-bold py-2 px-4 rounded border border-blue-600 hover:bg-blue-600 hover:text-white transition-all",children:v.text})})]})]})}},90925:(e,t,s)=>{"use strict";let a,r;s.d(t,{AuthProvider:()=>h,A:()=>m});var l=s(95155),o=s(12115),i=s(23915),n=s(45404),c=s(71906);a=(0,i.Wp)({apiKey:"AIzaSyBXS56tIro9cd-Sd4ySn5AwLw3T6cnMHr0",authDomain:"yeeplatform.firebaseapp.com",projectId:"yeeplatform",storageBucket:"yeeplatform.appspot.com",messagingSenderId:"272587831821",appId:"1:272587831821:web:b612b427ff43968f33f344",measurementId:"G-YZV03469PP"}),r=(0,n.xI)(a),(0,c.TT)().then(e=>{e&&(0,c.P5)(a)});let d=(0,o.createContext)({user:null,loading:!0});function m(){return(0,o.useContext)(d)}function h(e){let{children:t}=e,[s,a]=(0,o.useState)(null),[i,c]=(0,o.useState)(!0);(0,o.useEffect)(()=>{if(!r)return void c(!1);let e=(0,n.hg)(r,e=>{a(e),c(!1)});return()=>e()},[]);let m=(0,o.useMemo)(()=>({user:s,loading:i}),[s,i]);return(0,l.jsx)(d.Provider,{value:m,children:t})}}},e=>{e.O(0,[3965,7555,6874,9641,5353,8441,5964,7358],()=>e(e.s=18271)),_N_E=e.O()}]);