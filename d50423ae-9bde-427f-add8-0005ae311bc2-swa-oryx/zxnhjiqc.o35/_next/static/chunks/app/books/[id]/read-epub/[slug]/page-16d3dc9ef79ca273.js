(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8387],{12889:(e,t,r)=>{Promise.resolve().then(r.bind(r,71346))},13052:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:c?24*Number(o)/Number(a):o,className:l("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:c,...i}=r;return(0,s.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...i})});return r.displayName=a(e),r}},35169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},42355:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},47924:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},54416:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62098:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},71346:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var s=r(95155),a=r(12115),l=r(38485),n=r(35695),o=r(54416),c=r(62098),i=r(93509),d=r(47924),u=r(35169),h=r(42355),m=r(13052),x=r(74783);let b=e=>{let{isOpen:t,onClose:r,theme:a,setTheme:l,font:n,setFont:u,searchQuery:h,setSearchQuery:m,handleSearch:x,fonts:b}=e;return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:r}),(0,s.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-lg z-50 transform transition-transform duration-300 max-h-[80vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Reading Controls"}),(0,s.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,s.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>l("light"),className:"flex items-center space-x-2 p-3 rounded-lg transition-colors flex-1 ".concat("light"===a?"bg-blue-100 border-blue-200":"bg-gray-50 hover:bg-gray-100"),children:[(0,s.jsx)(c.A,{className:"h-5 w-5 text-yellow-600"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Light"})]}),(0,s.jsxs)("button",{onClick:()=>l("dark"),className:"flex items-center space-x-2 p-3 rounded-lg transition-colors flex-1 ".concat("dark"===a?"bg-blue-100 border-blue-200":"bg-gray-50 hover:bg-gray-100"),children:[(0,s.jsx)(i.A,{className:"h-5 w-5 text-gray-600"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Dark"})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),(0,s.jsx)("select",{value:n,onChange:e=>u(e.target.value),className:"w-full p-3 border border-gray-200 rounded-lg bg-white",children:b.map(e=>(0,s.jsx)("option",{value:e,children:e.split(",")[0]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Search in Book"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"Enter search term...",className:"flex-1 p-3 border border-gray-200 rounded-lg",onKeyPress:e=>"Enter"===e.key&&x()}),(0,s.jsx)("button",{onClick:x,className:"p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})})]})]})]})})]}):null},g=e=>{let{message:t}=e;return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 p-4",children:(0,s.jsxs)("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg shadow-md max-w-md w-full",children:[(0,s.jsx)("div",{className:"text-red-500 text-4xl sm:text-6xl mb-4",children:"\uD83D\uDCDA"}),(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:"Unable to Load EPUB"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:t}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors w-full sm:w-auto",children:"Try Again"})]})})},f={...l.Ko,readerArea:{...l.Ko.readerArea,transition:void 0},arrow:{...l.Ko.arrow,color:"#f59e0b"},arrowHover:{...l.Ko.arrowHover,color:"#f59e0b"},titleArea:{...l.Ko.titleArea,color:"black"},tocArea:{...l.Ko.tocArea,color:"#f59e0b"},tocButtonExpanded:{...l.Ko.tocButtonExpanded,color:"#f59e0b"},tocButtonBar:{...l.Ko.tocButtonBar,background:"black"},tocButton:{...l.Ko.tocButton,color:"#f59e0b"}},p={...l.Ko,arrow:{...l.Ko.arrow,color:"white"},arrowHover:{...l.Ko.arrowHover,color:"yellow"},readerArea:{...l.Ko.readerArea,backgroundColor:"#000",transition:void 0},titleArea:{...l.Ko.titleArea,color:"#ccc"},tocArea:{...l.Ko.tocArea,background:"#111"},tocButtonExpanded:{...l.Ko.tocButtonExpanded,background:"#222"},tocButtonBar:{...l.Ko.tocButtonBar,background:"#fff"},tocButton:{...l.Ko.tocButton,color:"white"}},v=e=>{let{initialEbookContent:t,id:r,slug:o,ebookDate:v}=e,[j,y]=(0,a.useState)("light"),[w,N]=(0,a.useState)("Georgia, serif"),[k,A]=(0,a.useState)(null),[C,B]=(0,a.useState)(!0),[S,E]=(0,a.useState)(null),[K,P]=(0,a.useState)(!1),[R,M]=(0,a.useState)(!1),[T,U]=(0,a.useState)(""),[z,L]=(0,a.useState)([]),[_,H]=(0,a.useState)(0),[D,O]=(0,a.useState)(!1),[W,F]=(0,a.useState)(""),G=(0,a.useRef)(null),I=(0,a.useRef)(null),$=(0,n.useRouter)(),q=["Georgia, serif","Arial, sans-serif","Times New Roman, serif","Helvetica, sans-serif","Verdana, sans-serif","Courier New, monospace","Palatino, serif","Garamond, serif","Trebuchet MS, sans-serif","Tahoma, sans-serif"];function Q(e,t,r){let s=e.themes;switch(t){case"dark":s.override("color","#fff"),s.override("background-color","#000"),s.override("font-family",r);break;case"light":s.override("color","#000"),s.override("background-color","#fff"),s.override("font-family",r)}}(0,a.useEffect)(()=>{let e=()=>{M(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{G.current&&Q(G.current,j,w)},[j,w]);let Z=async()=>{if(T.trim()){O(!0);try{let e=await (!G.current?Promise.resolve([]):Promise.all(G.current.book.spine.spineItems.map(e=>e.load(G.current.book.load.bind(G.current.book)).then(e.find.bind(e,T)).finally(e.unload.bind(e)))).then(e=>{var t;(null==(t=G.current)?void 0:t.annotations)&&G.current.annotations.remove();let r=e.reduce((e,t)=>e.concat(t),[]);return r.forEach(e=>{var t;(null==(t=G.current)?void 0:t.annotations)&&e.cfi&&G.current.annotations.highlight(e.cfi,{},()=>{})}),r}).catch(e=>(console.error("Search error:",e),[])));L(e),H(0),e.length>0&&e[0].cfi&&G.current&&G.current.display(e[0].cfi)}catch(e){console.error("Search error:",e)}finally{O(!1)}}},V=()=>{if(0===z.length||!G.current)return;let e=(_+1)%z.length,t=z[e];(null==t?void 0:t.cfi)&&(G.current.display(t.cfi),H(e))},J=()=>{if(0===z.length||!G.current)return;let e=(_-1+z.length)%z.length,t=z[e];(null==t?void 0:t.cfi)&&(G.current.display(t.cfi),H(e))},X=(null==t?void 0:t.ebookepubImagesUrl)||(null==t?void 0:t.ebook_url)||(null==t?void 0:t.ebookUrl);return X?S?(0,s.jsx)(g,{message:S}):(0,s.jsxs)("div",{className:"h-screen w-full bg-gray-100 relative",children:[(0,s.jsxs)("div",{className:"hidden md:block bg-white border-b shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,s.jsxs)("button",{onClick:()=>$.back(),className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back"})]}),(0,s.jsxs)("div",{className:"flex-1 mx-4 text-center",children:[(0,s.jsx)("h1",{className:"font-semibold text-gray-800 truncate",children:(null==t?void 0:t.title)||"EPUB Reader"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:W})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>y("light"===j?"dark":"light"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Toggle theme",children:"light"===j?(0,s.jsx)(i.A,{className:"h-5 w-5"}):(0,s.jsx)(c.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"text",value:T,onChange:e=>U(e.target.value),placeholder:"Search...",className:"px-3 py-2 border border-gray-200 rounded-md text-sm w-48",onKeyPress:e=>"Enter"===e.key&&Z()}),(0,s.jsx)("button",{onClick:Z,className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors",disabled:D,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("select",{value:w,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-md text-sm",children:q.map(e=>(0,s.jsx)("option",{value:e,children:e.split(",")[0]},e))})]})]}),z.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-50 border-b",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[z.length," results found"]}),(0,s.jsx)("button",{onClick:J,className:"p-1 hover:bg-blue-100 rounded transition-colors",disabled:0===z.length,children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[_+1," of ",z.length]}),(0,s.jsx)("button",{onClick:V,className:"p-1 hover:bg-blue-100 rounded transition-colors",disabled:0===z.length,children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"md:hidden flex items-center justify-between w-full bg-white border-b px-3 py-2 shadow-sm",children:[(0,s.jsx)("button",{onClick:()=>$.back(),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(u.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1 mx-2 text-center",children:[(0,s.jsx)("h1",{className:"font-medium text-gray-800 truncate text-sm",children:(null==t?void 0:t.title)||"EPUB Reader"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:W})]}),(0,s.jsx)("button",{onClick:()=>P(!0),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(x.A,{className:"h-5 w-5"})})]}),R&&z.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 px-4 py-2 bg-blue-50 border-b",children:[(0,s.jsx)("button",{onClick:J,className:"p-1 hover:bg-blue-100 rounded transition-colors",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[_+1," / ",z.length]}),(0,s.jsx)("button",{onClick:V,className:"p-1 hover:bg-blue-100 rounded transition-colors",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(b,{isOpen:K,onClose:()=>P(!1),theme:j,setTheme:y,font:w,setFont:N,searchQuery:T,setSearchQuery:U,handleSearch:Z,fonts:q}),(0,s.jsx)("div",{className:"h-full",style:{paddingTop:"0"},children:(0,s.jsx)(l.$W,{title:null==t?void 0:t.title,url:X,showToc:!R,location:k,locationChanged:e=>{if(A(e),G.current&&I.current){let{displayed:e,href:t}=G.current.location.start,r=I.current.find(e=>e.href===t);F("Page ".concat(e.page," of ").concat(e.total," in chapter ").concat(r?r.label:"n/a"))}},epubInitOptions:{openAs:"epub"},readerStyles:"dark"===j?p:f,getRendition:e=>{G.current=e,Q(e,j,w),B(!1),e.themes.default({"::selection":{background:"orange"}})},tocChanged:e=>I.current=e})})]}):(0,s.jsx)(g,{message:"No EPUB file available to display"})}},74783:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]])},93509:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(19946).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])}},e=>{e.O(0,[4278,9641,8485,8441,5964,7358],()=>e(e.s=12889)),_N_E=e.O()}]);