(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1428],{12774:(e,s,t)=>{"use strict";t.d(s,{default:()=>N});var l=t(95155),a=t(12115),r=t(35695),n=t(23406),i=t(83980),d=t(54416),o=t(47924),c=t(57918),x=t(62098),m=t(51154),u=t(35169),h=t(74783),g=t(42355),b=t(13052);t(25167),t(33374);let j=e=>{let{isOpen:s,onClose:t,controls:a}=e;if(!s)return null;let{ZoomIn:r,ZoomOut:n,EnterFullScreen:i,SwitchTheme:m,ShowSearchPopover:u}=a;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:t}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-xl shadow-lg z-50 md:hidden transform transition-transform duration-300",children:(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full mx-auto mb-4"}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:"PDF Controls"}),(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,l.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("button",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,l.jsx)(o.A,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Search"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,l.jsx)(r,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Zoom In"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,l.jsx)(n,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Zoom Out"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,l.jsx)(c.A,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Fullscreen"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors col-span-2",children:[(0,l.jsx)(x.A,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Toggle Theme"})]})]})]})})]})},f=e=>{let{progress:s=0}=e;return(0,l.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-50 p-4",children:(0,l.jsxs)("div",{className:"text-center max-w-sm w-full",children:[(0,l.jsx)(m.A,{className:"h-8 w-8 sm:h-12 sm:w-12 animate-spin text-blue-500 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-700 mb-2",children:"Loading PDF..."}),s>0&&(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,l.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:s>0?"".concat(Math.round(s),"% loaded"):"Preparing document..."})]})})},p=e=>{let{message:s}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 p-4",children:(0,l.jsxs)("div",{className:"text-center p-6 sm:p-8 bg-white rounded-lg shadow-md max-w-md w-full",children:[(0,l.jsx)("div",{className:"text-red-500 text-4xl sm:text-6xl mb-4",children:"\uD83D\uDCC4"}),(0,l.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:"Unable to Load PDF"}),(0,l.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:s}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors w-full sm:w-auto",children:"Try Again"})]})})},N=e=>{let{initialEbookContent:s,id:t,slug:d,ebookDate:o}=e,[c,x]=(0,a.useState)(null),[m,N]=(0,a.useState)(!0),[y,w]=(0,a.useState)(null),[v,k]=(0,a.useState)(0),[P,F]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!1),[S,A]=(0,a.useState)(1),[L,z]=(0,a.useState)(0),E=(0,r.useRouter)();(0,a.useEffect)(()=>{let e=()=>{D(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{(()=>{try{let e=(null==s?void 0:s.optimized_url)||(null==s?void 0:s.ebookUrl)||(null==s?void 0:s.coverImage_optimized_url);if(!e){w("No PDF URL found in the ebook data"),N(!1);return}x(e),N(!1)}catch(e){console.error("Error initializing PDF URL:",e),w("Failed to initialize PDF URL"),N(!1)}})()},[s]);let _=(0,i.defaultLayoutPlugin)({sidebarTabs:()=>[],renderToolbar:e=>(0,l.jsx)(e,{children:e=>{let{CurrentPageInput:t,GoToNextPage:a,GoToPreviousPage:r,NumberOfPages:n,ShowSearchPopover:i,Zoom:d,ZoomIn:o,ZoomOut:c,EnterFullScreen:x,SwitchTheme:m}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"hidden md:flex items-center justify-between w-full bg-white border-b px-4 py-2 shadow-sm",children:[(0,l.jsxs)("button",{onClick:()=>E.back(),className:"flex items-center space-x-2 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:[(0,l.jsx)(u.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:"Back"})]}),(0,l.jsx)("div",{className:"flex-1 mx-4 text-center",children:(0,l.jsx)("h1",{className:"font-semibold text-gray-800 truncate",children:(null==s?void 0:s.title)||"PDF Reader"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(i,{}),(0,l.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-50 rounded-md px-2 py-1",children:[(0,l.jsx)(r,{}),(0,l.jsx)(t,{}),(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"/"}),(0,l.jsx)(n,{}),(0,l.jsx)(a,{})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-50 rounded-md px-2 py-1",children:[(0,l.jsx)(c,{}),(0,l.jsx)(d,{}),(0,l.jsx)(o,{})]}),(0,l.jsx)(x,{}),(0,l.jsx)(m,{})]})]}),(0,l.jsxs)("div",{className:"md:hidden flex items-center justify-between w-full bg-white border-b px-3 py-2 shadow-sm",children:[(0,l.jsx)("button",{onClick:()=>E.back(),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,l.jsx)(u.A,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 mx-2 text-center",children:[(0,l.jsx)("h1",{className:"font-medium text-gray-800 truncate text-sm",children:(null==s?void 0:s.title)||"PDF Reader"}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:["Page ",S," of ",L]})]}),(0,l.jsx)("button",{onClick:()=>F(!0),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,l.jsx)(h.A,{className:"h-5 w-5"})})]}),(0,l.jsx)(j,{isOpen:P,onClose:()=>F(!1),controls:{ZoomIn:o,ZoomOut:c,EnterFullScreen:x,SwitchTheme:m,ShowSearchPopover:i}})]})}})});return m?(0,l.jsx)(f,{progress:v}):y?(0,l.jsx)(p,{message:y}):c?(0,l.jsxs)("div",{className:"h-screen w-full bg-gray-100 relative",children:[C&&L>0&&(0,l.jsxs)("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30 flex items-center space-x-4 bg-white/90 backdrop-blur-sm rounded-full px-4 py-2 shadow-lg",children:[(0,l.jsx)("button",{onClick:()=>A(Math.max(1,S-1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",disabled:S<=1,children:(0,l.jsx)(g.A,{className:"h-5 w-5"})}),(0,l.jsxs)("span",{className:"text-sm font-medium px-2",children:[S," / ",L]}),(0,l.jsx)("button",{onClick:()=>A(Math.min(L,S+1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50",disabled:S>=L,children:(0,l.jsx)(b.A,{className:"h-5 w-5"})})]}),(0,l.jsx)(n.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",children:(0,l.jsx)(n.Viewer,{fileUrl:c,plugins:[_],scrollMode:C?n.ScrollMode.Page:n.ScrollMode.Vertical,defaultScale:(()=>{let e=window.innerWidth;return e<=480?.6:e<=768?.8:e<=1024?1:1.2})(),onDocumentLoad:e=>{console.log("PDF loaded successfully:",e.doc.numPages,"pages"),z(e.doc.numPages),k(100)},onPageChange:e=>{console.log("Page changed to:",e.currentPage),A(e.currentPage)},renderLoader:e=>(0,l.jsx)(f,{progress:e}),renderError:e=>(0,l.jsx)(p,{message:"Failed to load PDF: ".concat(e.message||"Unknown error")})})})]}):(0,l.jsx)(p,{message:"No PDF file available to display"})}},17640:()=>{},23237:()=>{},31815:()=>{},73541:(e,s,t)=>{Promise.resolve().then(t.bind(t,12774))},82787:()=>{},97492:()=>{}},e=>{e.O(0,[2196,592,9641,938,8441,5964,7358],()=>e(e.s=73541)),_N_E=e.O()}]);