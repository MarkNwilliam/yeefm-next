(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5013],{8337:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(95155);function r(e){let{searchTerm:s,onSearchChange:a,onSearchClick:r,placeholder:l="Search...",onKeyPress:o}=e;return(0,t.jsxs)("div",{className:"flex w-full max-w-md",children:[(0,t.jsx)("input",{type:"text",value:s,onChange:e=>a(e.target.value),onKeyPress:o,placeholder:l,className:"flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsx)("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-r-lg transition-colors",children:"Search"})]})}},35695:(e,s,a)=>{"use strict";var t=a(18999);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},38995:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var t=a(95155),r=a(12115),l=a(35695),o=a(8337),i=a(95565),n=a(46757),c=a(99932);let d=["Science","Technology","Mathematics","History","Literature","Business","Art","Philosophy","Physics","Computer Science","Engineering","Medicine"],m="https://yeeplatformbackend.azurewebsites.net";function x(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),a=s.get("page"),x=s.get("search"),h=s.get("category"),[u,g]=(0,r.useState)(x||""),[b,p]=(0,r.useState)(a?parseInt(a):1),[f,v]=(0,r.useState)(h||""),[y,j]=(0,r.useState)("grid"),[w,N]=(0,r.useState)(d),[k,C]=(0,r.useState)([]),[S,A]=(0,r.useState)(1),[P,L]=(0,r.useState)(0),[E,M]=(0,r.useState)(!0),[R,z]=(0,r.useState)(null),U=(0,r.useCallback)((s,a,t)=>{let r=new URLSearchParams;s>1&&r.set("page",s.toString()),a&&a.trim()&&r.set("search",a.trim()),t&&t.trim()&&r.set("category",t.trim());let l=r.toString();e.push(l?"?".concat(l):"",{scroll:!1})},[e]),I=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";M(!0),z(null);try{let t;t=a&&a.trim()?"".concat(m,"/categoryindex/ebook/").concat(encodeURIComponent(a.toLowerCase()),"?page=").concat(s,"&limit=").concat(15):e&&e.trim()?"".concat(m,"/searchIndexedBooks?query=").concat(encodeURIComponent(e.trim()),"&page=").concat(s,"&limit=").concat(15):"".concat(m,"/getallfreeebooks?page=").concat(s,"&limit=").concat(15);let r=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok){let e="HTTP error! status: ".concat(r.status);try{e=(await r.json()).message||e}catch(e){}throw Error(e)}let l=await r.json();if(!l||!Array.isArray(l.data))throw Error("Invalid API response structure");C(l.data),A(Math.max(l.totalPages||1,1)),L(l.totalItems||0),p(l.currentPage||s);let o=new Set(d);l.data.forEach(e=>{[e.categories,e.subjects].filter(Boolean).forEach(e=>{Array.isArray(e)&&e.forEach(e=>{"string"==typeof e&&e.trim()&&o.add(e.trim())})})}),N(Array.from(o).sort())}catch(s){let e=s instanceof Error?s.message:"Failed to fetch ebooks";console.error("Fetch error:",s),z(e),C([]),A(1),L(0)}finally{M(!1)}},[]);(0,r.useEffect)(()=>{let e=a?Math.max(parseInt(a),1):1,s=x||"",t=h||"";p(e),g(s),v(t),I(s,e,t)},[a,x,h,I]);let T=(0,r.useCallback)(()=>{p(1),U(1,u,f)},[u,f,U]),H=(0,r.useCallback)(e=>{"Enter"===e.key&&T()},[T]),_=(0,r.useCallback)(e=>{p(e),U(e,u,f),window.scrollTo({top:0,behavior:"smooth"})},[u,f,U]),B=(0,r.useCallback)(e=>{v(e),p(1),U(1,u,e)},[u,U]),F=(0,r.useCallback)(e=>{let s=e.ebookpdfUrl||e.ebookUrl;if(s){let e=document.createElement("a");e.href=s,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)}else console.warn("No download URL available for ebook:",e.title)},[]),V=(0,r.useCallback)(e=>{let s=e.ebookUrl;s?window.open(s,"_blank","noopener,noreferrer"):console.warn("No view URL available for ebook:",e.title)},[]),D=(0,r.useCallback)(e=>Array.isArray(e.authors)&&e.authors.length>0?e.authors.filter(e=>e&&e.trim()).join(", "):e.author&&"string"==typeof e.author?e.author.replace(/\|\|/g,", ").trim():"Unknown Author",[]),G=(0,r.useCallback)(()=>{g(""),v(""),p(1),U(1)},[U]);return E&&0===k.length?(0,t.jsxs)("div",{className:"p-3 sm:p-6 bg-gray-50 min-h-screen",children:[(0,t.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Ebooks Library"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Loading your ebook collection..."})]}),(0,t.jsx)(i.A,{})]}):(0,t.jsxs)("div",{className:"p-3 sm:p-6 bg-gray-50 min-h-screen",children:[(0,t.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Ebooks Library"}),(0,t.jsxs)("p",{className:"text-sm sm:text-base text-gray-600",children:["Discover and read from our extensive collection of ",P.toLocaleString()," ebooks"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 mb-4 sm:mb-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(o.A,{searchTerm:u,onSearchChange:g,onSearchClick:T,onKeyPress:H,placeholder:"Search ebooks by title, author, or keywords..."})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 flex-1",children:[(0,t.jsxs)("select",{value:f,onChange:e=>B(e.target.value),className:"w-full sm:w-auto min-w-[200px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm bg-white","aria-label":"Filter by category",children:[(0,t.jsx)("option",{value:"",children:"All Categories"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(u||f)&&(0,t.jsx)("button",{onClick:G,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg border border-gray-300 transition-colors","aria-label":"Clear all filters",children:"Clear Filters"})]}),(0,t.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden self-center sm:self-auto",children:[(0,t.jsx)("button",{onClick:()=>j("grid"),className:"px-3 py-2 text-sm transition-colors ".concat("grid"===y?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),"aria-label":"Grid view","aria-pressed":"grid"===y,children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),(0,t.jsx)("button",{onClick:()=>j("list"),className:"px-3 py-2 text-sm transition-colors ".concat("list"===y?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),"aria-label":"List view","aria-pressed":"list"===y,children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})]})]})}),R&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4 sm:mb-6",role:"alert",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-red-400 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Error Loading Ebooks"}),(0,t.jsx)("p",{className:"text-red-700 text-sm",children:R}),(0,t.jsx)("button",{onClick:()=>I(u,b,f),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium underline transition-colors",children:"Try Again"})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-2",children:[(0,t.jsx)("div",{className:"text-gray-600 text-sm sm:text-base",children:E?(0,t.jsx)("span",{children:"Loading ebooks..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Showing ",k.length.toLocaleString()," of ",P.toLocaleString()," ebooks"]}),u&&(0,t.jsxs)("span",{className:"block sm:inline",children:[" ",'matching "',(0,t.jsx)("span",{className:"font-medium text-gray-900",children:u}),'"']}),f&&(0,t.jsxs)("span",{className:"block sm:inline",children:[" ",'in "',(0,t.jsx)("span",{className:"font-medium text-gray-900",children:f}),'"']}),S>1&&(0,t.jsxs)("span",{className:"block sm:inline text-gray-500",children:[" ","(Page ",b," of ",S,")"]})]})}),E&&k.length>0&&(0,t.jsxs)("div",{className:"flex items-center text-blue-600 text-sm",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]})]}),(0,t.jsx)("div",{className:"grid"===y?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-6 mb-6 sm:mb-8":"space-y-3 sm:space-y-4 mb-6 sm:mb-8",children:k.map(e=>{var s,a,r;return(0,t.jsx)(c.A,{ebook:{...e,author:D(e),views:(null==(s=e.statistics)?void 0:s.views)||parseInt(String(e.views||0))||0,downloads:(null==(a=e.statistics)?void 0:a.downloads)||parseInt(String(e.downloads||0))||0,rating:(null==(r=e.statistics)?void 0:r.rating)||e.rating||0},onView:()=>V(e),onDownload:()=>F(e),onCategoryClick:B,variant:y},e._id)})}),!E&&0===k.length&&!R&&(0,t.jsx)("div",{className:"text-center py-8 sm:py-12",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto px-4",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900 mb-2",children:"No ebooks found"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-gray-500 mb-4",children:u||f?"No ebooks match your current search criteria":"No ebooks are available at the moment"}),(u||f)&&(0,t.jsx)("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"View All Ebooks"})]})}),S>1&&!E&&(0,t.jsx)("div",{className:"flex justify-center mt-6 sm:mt-8",children:(0,t.jsx)(n.default,{currentPage:b,totalPages:S,onChange:_})}),S>1&&(0,t.jsxs)("div",{className:"sr-only","aria-live":"polite",children:["Page ",b," of ",S,", showing ",k.length," ebooks out of ",P," total"]})]})}},46757:(e,s,a)=>{"use strict";a.d(s,{default:()=>r});var t=a(95155);function r(e){let{totalPages:s,currentPage:a,onChange:r}=e;return s<=1?null:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2 my-6",children:[(0,t.jsx)("button",{onClick:()=>r(a-1),disabled:1===a,className:"px-3 py-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(()=>{let e=[];for(let t=Math.max(2,a-2);t<=Math.min(s-1,a+2);t++)e.push(t);return a-2>2&&e.unshift("..."),a+2<s-1&&e.push("..."),e.unshift(1),s>1&&e.push(s),e})().map((e,s)=>(0,t.jsx)("button",{onClick:()=>"number"==typeof e&&r(e),disabled:"..."===e,className:"px-3 py-2 rounded-lg border ".concat(e===a?"bg-blue-600 text-white":"..."===e?"cursor-default":"hover:bg-gray-50"),children:e},s)),(0,t.jsx)("button",{onClick:()=>r(a+1),disabled:a===s,className:"px-3 py-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})}},93163:(e,s,a)=>{Promise.resolve().then(a.bind(a,38995))},95565:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(95155);function r(){return(0,t.jsxs)("div",{className:"rounded-lg overflow-hidden shadow-md bg-white w-full flex flex-col min-h-[300px] animate-pulse",children:[(0,t.jsx)("div",{className:"w-full h-48 bg-gray-200"}),(0,t.jsxs)("div",{className:"p-4 flex-grow",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})}},99932:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(95155);function r(e){let{ebook:s,onView:a,onDownload:r,onCategoryClick:l,variant:o="grid"}=e,i=()=>Array.isArray(s.authors)&&s.authors.length>0?s.authors.join(", "):s.author?s.author.replace(/\|\|/g,", "):"Unknown Author",n=()=>s.coverImage||s.thumbnailUrl||"https://placehold.co/400x200";return"list"===o?(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 sm:p-6 hover:shadow-md transition-shadow duration-200",children:(0,t.jsxs)("div",{className:"flex gap-3 sm:gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("img",{src:n(),alt:s.title,className:"w-16 h-20 sm:w-20 sm:h-28 object-cover rounded",onError:e=>{e.target.src="https://placehold.co/400x200"}})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-base sm:text-xl font-semibold text-gray-900 mb-1 hover:text-blue-600 cursor-pointer line-clamp-2",children:s.title}),(0,t.jsxs)("p",{className:"text-sm sm:text-base text-gray-600 mb-2 truncate",children:["by ",i()]}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-3 line-clamp-2 sm:line-clamp-3",children:s.description||"No description available"}),Array.isArray(s.categories)&&s.categories.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:s.categories.slice(0,3).map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded cursor-pointer hover:bg-blue-200",onClick:()=>null==l?void 0:l(e),children:e},s))}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[s.views&&(0,t.jsxs)("span",{children:[s.views.toLocaleString()," views"]}),s.downloads&&(0,t.jsxs)("span",{children:[s.downloads.toLocaleString()," downloads"]}),s.rating&&(0,t.jsxs)("span",{children:[s.rating.toFixed(1),"/5 ⭐"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row sm:flex-col gap-2 mt-3 sm:mt-0 sm:ml-4",children:[(0,t.jsx)("button",{onClick:a,className:"flex-1 sm:flex-initial bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm py-2 px-3 sm:px-4 rounded transition-colors whitespace-nowrap",children:"Read Now"}),(0,t.jsx)("button",{onClick:r,className:"flex-1 sm:flex-initial bg-gray-600 hover:bg-gray-700 text-white text-xs sm:text-sm py-2 px-3 sm:px-4 rounded transition-colors whitespace-nowrap",children:"Download"})]})]})})]})}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"aspect-[3/4] relative",children:[(0,t.jsx)("img",{src:n(),alt:s.title,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://placehold.co/400x200"}}),s.accessType&&(0,t.jsx)("span",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:s.accessType})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-1 line-clamp-2",children:s.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["by ",i()]}),s.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3 line-clamp-3",children:s.description}),Array.isArray(s.categories)&&s.categories.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:s.categories.slice(0,2).map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200",onClick:()=>null==l?void 0:l(e),children:e},s))}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-4",children:[s.views&&(0,t.jsxs)("span",{children:[s.views.toLocaleString()," views"]}),s.downloads&&(0,t.jsxs)("span",{children:[s.downloads.toLocaleString()," downloads"]}),s.rating&&(0,t.jsxs)("span",{children:[s.rating.toFixed(1),"/5 ⭐"]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded text-sm",children:"Read"})})]})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=93163)),_N_E=e.O()}]);